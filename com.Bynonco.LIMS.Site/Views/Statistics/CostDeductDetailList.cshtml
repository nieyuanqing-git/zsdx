@using com.Bynonco.JqueryEasyUI.Core;
@{
    var isManageList = ViewData["IsManageList"] == null ? true : bool.Parse(ViewData["IsManageList"].ToString());
    var isOpenFundApply = ViewData["IsOpenFundApply"] == null ? false : bool.Parse(ViewData["IsOpenFundApply"].ToString());
    var dataGrid = Html.JDataGrid("tbViewManualCostDeductList")
    .SetUrl(Url.Action("GetGridCostDeductDetailStatistics", "Statistics"))
    .AddQueryParam("queryExpression", ViewData["queryExpression"] == null ? "" : ViewData["queryExpression"].ToString().Trim())
    .AddQueryParam("IsManageList", isManageList.ToString().ToLower())
    .SetHeight(550)
    .SetPageSize(10)
    .SetSortName("DeductAt")
    .SetSortOrder(SortOrder.desc)
    .AddFrozenColum(new com.Bynonco.JqueryEasyUI.Core.DataGridColumn("编码", "Id").SetHidden(true))
    .AddFrozenColum(new com.Bynonco.JqueryEasyUI.Core.DataGridColumn("图片", "UserIcon").SetWidth(45).SetAlign(Align.center))
    .AddFrozenColum(new com.Bynonco.JqueryEasyUI.Core.DataGridColumn("使用者", "UserName").SetWidth(60).SetAlign(Align.center))
    .AddFrozenColum(new com.Bynonco.JqueryEasyUI.Core.DataGridColumn("设备名称/扣费名目", "EquipmentNameStr").SetWidth(150).SetAlign(Align.left))
    .AddColum(new com.Bynonco.JqueryEasyUI.Core.DataGridColumn("扣费类型", "CostDeductTypeStr").SetWidth(80).SetAlign(Align.center))
    .AddColum(new com.Bynonco.JqueryEasyUI.Core.DataGridColumn("付费人", "PayerName").SetWidth(60).SetAlign(Align.center))
    .AddColum(new com.Bynonco.JqueryEasyUI.Core.DataGridColumn("项目信息", "SubjectProjectName").SetWidth(120).SetAlign(Align.center))
    .AddColum(new com.Bynonco.JqueryEasyUI.Core.DataGridColumn("实际用时<br />(小时)", "DurationStr").SetWidth(60).SetAlign(Align.center))
    .AddColum(new com.Bynonco.JqueryEasyUI.Core.DataGridColumn("计费时长<br />(小时)", "CalcDurationStr").SetWidth(60).SetAlign(Align.center))
    .AddColum(new com.Bynonco.JqueryEasyUI.Core.DataGridColumn("真实币(元)", "RealCurrencyStr").SetWidth(80).SetAlign(Align.center))
    .AddColum(new com.Bynonco.JqueryEasyUI.Core.DataGridColumn("补贴币(元)", "OpenFundCurrencyStr").SetHidden(!isOpenFundApply).SetWidth(80).SetAlign(Align.center))
    .AddColum(new com.Bynonco.JqueryEasyUI.Core.DataGridColumn("奖励币(元)", "VirtualCurrencyStr").SetWidth(80).SetAlign(Align.center))
    .AddColum(new com.Bynonco.JqueryEasyUI.Core.DataGridColumn("总金额(元)", "TotalCurrencyStr").SetWidth(80).SetAlign(Align.center))
    .AddColum(new com.Bynonco.JqueryEasyUI.Core.DataGridColumn("计费标准", "UnitPriceStr").SetWidth(80).SetAlign(Align.center))
    .AddColum(new com.Bynonco.JqueryEasyUI.Core.DataGridColumn("支付方式", "PaymentMethodStr").SetWidth(100).SetAlign(Align.center))
    .AddColum(new com.Bynonco.JqueryEasyUI.Core.DataGridColumn("开始时间", "BeginAtStr").SetWidth(110).SetAlign(Align.center))
    .AddColum(new com.Bynonco.JqueryEasyUI.Core.DataGridColumn("结束时间", "EndAtStr").SetWidth(110).SetAlign(Align.center))
    .AddColum(new com.Bynonco.JqueryEasyUI.Core.DataGridColumn("扣费人", "CreaterName").SetWidth(60).SetAlign(Align.center))
    .AddColum(new com.Bynonco.JqueryEasyUI.Core.DataGridColumn("扣费时间", "DeductAtStr").SetWidth(110).SetAlign(Align.center))
    .AddColum(new com.Bynonco.JqueryEasyUI.Core.DataGridColumn("状态", "HasClossingAccountStr").SetWidth(60).SetAlign(Align.center))
    .AddColum(new com.Bynonco.JqueryEasyUI.Core.DataGridColumn("备注", "Remark").SetWidth(500).SetAlign(Align.left).SetSortable(false))
    .SetShowSearchButton(false)
    .SetShowPrintButton(false)
    .SetShowRefreshButton(false)
    .AddToolBarButton(new ToolBarButton() { Disabled = false, Handler = "doCostDeductDetailExportExcel();", IconCls = "icon-export", Id = "btnCostDeductDetailExportExcel", Text = "导出" })
    .AddToolBarButton(new ToolBarButton() { Disabled = false, Handler = "doCostDeductGroupDetailExportExcel();", IconCls = "icon-export", Id = "btnCostDeductGroupDetailExportExcel", Text = "分组导出" });

}
@(dataGrid.ToMvcString()) 