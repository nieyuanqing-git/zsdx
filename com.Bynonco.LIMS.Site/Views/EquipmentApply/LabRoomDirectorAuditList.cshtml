@using com.Bynonco.JqueryEasyUI.Core;
@using com.Bynonco.LIMS.BLL;
@using com.Bynonco.LIMS.Model.Enum;
@{
    var equipmentApplyPrivilige = com.Bynonco.LIMS.BLL.Business.Privilige.PriviligeFactory.GetEquipmentApplyPrivilige(User.Identity.Name);
    var dataGrid = Html.JDataGrid("tbLabRoomDirectorAuditIndexList")
    .SetUrl(Url.Action("GetGridViewEquipmentApplyList", "EquipmentApply", new { equipmentApplyRole = ((int)EquipmentApplyRole.LabRoomDirector).ToString() }))
    .SetHeight(550)
    .SetPageSize(10)
    .SetMutiSelect(true)
    .SetSortName("ApplyTime")
    .SetSortOrder(SortOrder.desc);
    dataGrid.AddFrozenColum(new com.Bynonco.JqueryEasyUI.Core.DataGridColumn("编码", "Id").SetHidden(true))
    .AddFrozenColum(new com.Bynonco.JqueryEasyUI.Core.DataGridColumn("图片", "Icon").SetWidth(50).SetAlign(Align.center))    
    .AddFrozenColum(new com.Bynonco.JqueryEasyUI.Core.DataGridColumn("设备名称", "NameStr").SetWidth(285).SetAlign(Align.left))
    .AddFrozenColum(new com.Bynonco.JqueryEasyUI.Core.DataGridColumn("型号", "Model").SetWidth(100).SetAlign(Align.center))
    .AddFrozenColum(new com.Bynonco.JqueryEasyUI.Core.DataGridColumn("申请人", "ApplicantName").SetWidth(80).SetAlign(Align.center))
    .AddFrozenColum(new com.Bynonco.JqueryEasyUI.Core.DataGridColumn("所在单位", "ApplicantOrgName").SetWidth(100).SetAlign(Align.center))
    .AddColum(new com.Bynonco.JqueryEasyUI.Core.DataGridColumn("状态", "StatusStr").SetWidth(180).SetAlign(Align.center))
    .AddColum(new com.Bynonco.JqueryEasyUI.Core.DataGridColumn("申请时间", "ApplyTimeStr").SetWidth(120).SetAlign(Align.center))
    .AddColum(new com.Bynonco.JqueryEasyUI.Core.DataGridColumn("审核人", "LabRoomAuditDirectorName").SetWidth(80).SetAlign(Align.center))
    .AddColum(new com.Bynonco.JqueryEasyUI.Core.DataGridColumn("审核时间", "LabRoomDirectorAuditTimeStr").SetWidth(120).SetAlign(Align.center))
    .AddColum(new com.Bynonco.JqueryEasyUI.Core.DataGridColumn("审核备注", "LabRoomDirectorAuditRemark").SetWidth(120).SetAlign(Align.center))
    .AddColum(new com.Bynonco.JqueryEasyUI.Core.DataGridColumn("单位名称", "LabRoomName").SetWidth(150).SetAlign(Align.center))
    .AddColum(new com.Bynonco.JqueryEasyUI.Core.DataGridColumn("校仪器编号", "EquipmentNo").SetWidth(100).SetAlign(Align.center))
    .AddColum(new com.Bynonco.JqueryEasyUI.Core.DataGridColumn("所在实验室", "LocatedLabRoom").SetWidth(120).SetAlign(Align.left))
    .AddColum(new com.Bynonco.JqueryEasyUI.Core.DataGridColumn("安放地点", "Location").SetWidth(200).SetAlign(Align.left))
    .AddColum(new com.Bynonco.JqueryEasyUI.Core.DataGridColumn("备注", "Remark").SetWidth(500).SetAlign(Align.left))
    .SetShowSearchButton(true)
    .SetSearchScript("doShowSearch()");
    if (equipmentApplyPrivilige.IsEnableLabRoomDirectorAudit)
    {
        dataGrid.AddToolBarButton(new ToolBarButton() { Handler = string.Format("doEquipmentApplyBatchAudit('{0}');return false;", ((int)EquipmentApplyRole.LabRoomDirector)), IconCls = "icon-pass", Id = "btnEquipmentApplyBatchAudit", Text = "审核" });
    };
}
@(dataGrid.ToMvcString()) 
